<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>c&#39;t-Bot: os_thread.h-Dateireferenz</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />



</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">c&#39;t-Bot
   &#160;<span id="projectnumber">1898</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Erzeugt von Doxygen 1.7.5.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Hauptseite</span></a></li>
      <li><a href="pages.html"><span>Zus채tzliche&#160;Informationen</span></a></li>
      <li><a href="annotated.html"><span>Datenstrukturen</span></a></li>
      <li class="current"><a href="files.html"><span>Dateien</span></a></li>
      <li><a href="dirs.html"><span>Verzeichnisse</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>Auflistung&#160;der&#160;Dateien</span></a></li>
      <li><a href="globals.html"><span>Datei-Elemente</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="dir_9d1e0dccf1391b04e9e09a3367003bd7.html">include</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#nested-classes">Datenstrukturen</a> &#124;
<a href="#define-members">Makrodefinitionen</a> &#124;
<a href="#func-members">Funktionen</a> &#124;
<a href="#var-members">Variablen</a>  </div>
  <div class="headertitle">
<div class="title">os_thread.h-Dateireferenz</div>  </div>
</div>
<div class="contents">

<p>Threadmanagement fuer BotOS.  
<a href="#details">Mehr ...</a></p>
<div class="textblock"><code>#include &lt;pthread.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="timer_8h_source.html">timer.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="os__scheduler_8h_source.html">os_scheduler.h</a>&quot;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include-Abh채ngigkeitsdiagramm f체r os_thread.h:</div>
<div class="dyncontent">
<div class="center"><img src="os__thread_8h__incl.png" border="0" usemap="#os__thread_8h" alt=""/></div>
<map name="os__thread_8h" id="os__thread_8h">
<area shape="rect" id="node5" href="timer_8h.html" title="Timer und Zaehler." alt="" coords="107,83,168,111"/><area shape="rect" id="node7" href="os__scheduler_8h.html" title="Mini&#45;Scheduler fuer BotOS." alt="" coords="192,83,304,111"/></map>
</div>
</div><div class="textblock"><div class="dynheader">
Dieser Graph zeigt, welche Datei direkt oder indirekt diese Datei enth채lt:</div>
<div class="dyncontent">
<div class="center"><img src="os__thread_8h__dep__incl.png" border="0" usemap="#os__thread_8hdep" alt=""/></div>
<map name="os__thread_8hdep" id="os__thread_8hdep">
<area shape="rect" id="node3" href="botcontrol_8c.html" title="High&#45;level Steuerungsroutinen, z.B." alt="" coords="2467,315,2557,343"/><area shape="rect" id="node5" href="botfs_8c.html" title="Dateisystem BotFS." alt="" coords="3123,83,3184,111"/><area shape="rect" id="node7" href="command_8c.html" title="Kommando&#45;Management." alt="" coords="120,315,211,343"/><area shape="rect" id="node9" href="map_8c.html" title="Karte." alt="" coords="2283,315,2341,343"/><area shape="rect" id="node11" href="behaviour__get__utilization_8c.html" title="Misst die CPU&#45;Auslastung eines anderen Verhaltens." alt="" coords="2480,238,2661,266"/><area shape="rect" id="node13" href="behaviour__scan_8c.html" title="Scannt die Umgebung und traegt sie in die Karte ein." alt="" coords="1205,238,1333,266"/><area shape="rect" id="node15" href="fifo_8h.html" title="Implementierung einer FIFO." alt="" coords="1765,83,1813,111"/><area shape="rect" id="node86" href="init-low_8c.html" title="Initialisierungsroutinen fuer MCU." alt="" coords="528,238,603,266"/><area shape="rect" id="node88" href="timer-low_8c.html" title="Timer und Counter fuer den Mikrocontroller." alt="" coords="627,238,712,266"/><area shape="rect" id="node90" href="uart_8c.html" title="Routinen zur seriellen Kommunikation." alt="" coords="736,238,789,266"/><area shape="rect" id="node92" href="map_8h.html" title="Karte." alt="" coords="2196,161,2255,189"/><area shape="rect" id="node105" href="mmc_8c.html" title="Routinen zum Auslesen/Schreiben einer MMC&#45;Karte." alt="" coords="2685,238,2747,266"/><area shape="rect" id="node107" href="os__scheduler_8c.html" title="Mini&#45;Scheduler fuer BotOS." alt="" coords="2771,238,2883,266"/><area shape="rect" id="node109" href="os__thread_8c.html" title="Threadmanagement fuer BotOS." alt="" coords="2907,238,2997,266"/><area shape="rect" id="node114" href="trace_8c.html" title="Trace&#45;Modul." alt="" coords="1980,161,2041,189"/><area shape="rect" id="node117" href="botfs-low_8c.html" title="Low&#45;Level&#45;Funktionen des Dateisystems BotFS fuer MCU." alt="" coords="3208,83,3293,111"/><area shape="rect" id="node125" href="botfs-low__pc_8c.html" title="Low&#45;Level&#45;Funktionen des Dateisystems BotFS fuer PC." alt="" coords="3317,83,3427,111"/><area shape="rect" id="node127" href="botfs__pc_8c.html" title="PC&#45;only Teile des Dateisystems BotFS." alt="" coords="3451,83,3533,111"/><area shape="rect" id="node129" href="os__thread__pc_8c.html" title="Threadmanagement fuer BotOS (PC)" alt="" coords="3557,83,3672,111"/><area shape="rect" id="node17" href="fifo_8c.html" title="Implementierung einer FIFO." alt="" coords="1704,161,1752,189"/><area shape="rect" id="node21" href="uart_8h.html" title="Routinen zur seriellen Kommunikation." alt="" coords="873,161,927,189"/><area shape="rect" id="node23" href="init_8c.html" title="Initialisierungsroutinen." alt="" coords="1133,238,1181,266"/><area shape="rect" id="node25" href="sensor_8c.html" title="Architekturunabhaengiger Teil der Sensorsteuerung." alt="" coords="864,238,936,266"/><area shape="rect" id="node27" href="command_8h.html" title="Kommando&#45;Management." alt="" coords="1459,238,1549,266"/><area shape="rect" id="node55" href="bot-2-sim_8c.html" title="Verbindung zwischen c&#39;t&#45;Bot und c&#39;t&#45;Sim." alt="" coords="5,315,96,343"/><area shape="rect" id="node83" href="bootloader_8c.html" title="AVR109 kompatibler Bootloader fuer den c&#39;t&#45;Bot." alt="" coords="960,238,1059,266"/><area shape="rect" id="node29" href="bot-2-bot_8c.html" title="Bot&#45;2&#45;Bot&#45;Kommunikation." alt="" coords="1961,393,2049,421"/><area shape="rect" id="node34" href="behaviour__drive__area_8c.html" title="Flaechendeckendes Fahren als Verhalten (Staubsauger)" alt="" coords="1431,393,1593,421"/><area shape="rect" id="node36" href="behaviour__drive__stack_8c.html" title="Anfahren aller auf dem Stack befindlichen Punkte." alt="" coords="2265,393,2433,421"/><area shape="rect" id="node38" href="behaviour__remotecall_8c.html" title="Ruft auf ein Kommando hin andere Verhalten auf und bestaetigt dann ihre Ausfuehrung." alt="" coords="1067,315,1229,343"/><area shape="rect" id="node40" href="pos__store_8h.html" title="Implementierung eines Positionsspeichers mit den ueblichen Stackbefehlen push(), pop() und FIFO&#45;Befeh..." alt="" coords="1877,315,1968,343"/><area shape="rect" id="node51" href="gui_8c.html" title="Display&#45;GUI des Bots." alt="" coords="2457,393,2508,421"/><area shape="rect" id="node53" href="rc5_8c.html" title="RC5&#45;Fernbedienung / Basic&#45;Tasten&#45;Handler." alt="" coords="953,393,1004,421"/><area shape="rect" id="node57" href="display_8c.html" title="Routinen zur Displaysteuerung." alt="" coords="1253,315,1328,343"/><area shape="rect" id="node59" href="mouse_8c.html" title="Routinen fuer die Ansteuerung eines opt. Maussensors." alt="" coords="1352,315,1424,343"/><area shape="rect" id="node61" href="bot-2-sim__pc_8c.html" title="Verbindung c&#39;t&#45;Bot zu c&#39;t&#45;Sim." alt="" coords="1448,315,1560,343"/><area shape="rect" id="node63" href="cmd-tools__pc_8c.html" title="Funktionen, die per Commandline&#45;Switch aufgerufen werden koennen." alt="" coords="2144,315,2259,343"/><area shape="rect" id="node65" href="display__pc_8c.html" title="Routinen zur Displaysteuerung." alt="" coords="1584,315,1683,343"/><area shape="rect" id="node67" href="init-low__pc_8c.html" title="Initialisierungsroutinen fuer PC." alt="" coords="1707,315,1803,343"/><area shape="rect" id="node69" href="ir-rc5__pc_8c.html" title="Routinen fuer die Dekodierung von RC5&#45;Fernbedienungs&#45;Codes." alt="" coords="285,315,371,343"/><area shape="rect" id="node71" href="led__pc_8c.html" title="Routinen zur LED&#45;Steuerung." alt="" coords="395,315,467,343"/><area shape="rect" id="node73" href="motor-low__pc_8c.html" title="Low&#45;Level Routinen fuer die Motorsteuerung des c&#39;t&#45;Bots." alt="" coords="491,315,605,343"/><area shape="rect" id="node75" href="sensor-low__pc_8c.html" title="Low&#45;Level Routinen fuer die Sensor Steuerung des c&#39;t&#45;Bots." alt="" coords="629,315,749,343"/><area shape="rect" id="node77" href="tcp-server_8c.html" title="Demo&#45;TCP&#45;Server." alt="" coords="773,315,867,343"/><area shape="rect" id="node79" href="tcp_8c.html" title="TCP/IP&#45;Kommunikation." alt="" coords="891,315,941,343"/><area shape="rect" id="node43" href="pos__store_8c.html" title="Implementierung eines Positionsspeichers mit den ueblichen Stackbefehlen push(), pop() und FIFO&#45;Befeh..." alt="" coords="1617,393,1708,421"/><area shape="rect" id="node47" href="behaviour__line__shortest__way_8c.html" title="Linienverfolger, der an Kreuzungen eine bestimmte Vorzugsrichtung einschlaegt (links) und diesen Weg ..." alt="" coords="1732,393,1937,421"/><area shape="rect" id="node49" href="behaviour__pathplaning_8c.html" title="Wave&#45;Pfadplanungsverhalten." alt="" coords="2073,393,2241,421"/><area shape="rect" id="node103" href="behaviour__transport__pillar_8c.html" title="Bot startet von einem Farb&#45;Startpad und entdeckt die Welt, bis er auf ein anderes Farbpad stoesst..." alt="" coords="2067,238,2253,266"/></map>
</div>
</div>
<p><a href="os__thread_8h_source.html">gehe zum Quellcode dieser Datei</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Datenstrukturen</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structos__signal__t.html">os_signal_t</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Signal-Typ zur Threadsynchronisation.  <a href="structos__signal__t.html#details">Mehr ...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structos__stat__data__t.html">os_stat_data_t</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Statistikdaten wie Laufzeit und Anzahl der ueberschrittenen Deadlines.  <a href="structos__stat__data__t.html#details">Mehr ...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structTcb__t.html">Tcb_t</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">TCB eines Threads.  <a href="structTcb__t.html#details">Mehr ...</a><br/></td></tr>
<tr><td colspan="2"><h2><a name="define-members"></a>
Makrodefinitionen</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__thread_8h.html#a42d66a999c19e795c22714a54fc2b6b2">OS_MAX_THREADS</a>&#160;&#160;&#160;4</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">maximale Anzahl an Threads im System  <a href="#a42d66a999c19e795c22714a54fc2b6b2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__thread_8h.html#aa3a2a69d3b5ce639d363a8914b8eeaab">OS_KERNEL_STACKSIZE</a>&#160;&#160;&#160;36</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Groesse des Kernel-Stacks (fuer Timer-ISR) [Byte].  <a href="#aa3a2a69d3b5ce639d363a8914b8eeaab"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__thread_8h.html#aa6afdd19d3022d101b8fc9942bb8422b">OS_IDLE_STACKSIZE</a>&#160;&#160;&#160;64</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Groesse des Idle-Stacks [Byte].  <a href="#aa6afdd19d3022d101b8fc9942bb8422b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__thread_8h.html#aa752c91dfa509beabcf63cf37a8a7d6e">OS_CONTEXT_SIZE</a>&#160;&#160;&#160;19</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Groesse des Kontextes eines Threads [Byte], muss zum Code in <a class="el" href="os__thread_8h.html#afa82438e9832609bc5ffbddad166e1b7" title="Schaltet &quot;von aussen&quot; auf einen neuen Thread um.">os_switch_thread()</a> passen!  <a href="#aa752c91dfa509beabcf63cf37a8a7d6e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__thread_8h.html#aa6afdd19d3022d101b8fc9942bb8422b">OS_IDLE_STACKSIZE</a>&#160;&#160;&#160;192</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Groesse des Idle-Stacks [Byte].  <a href="#aa6afdd19d3022d101b8fc9942bb8422b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__thread_8h.html#a436129a005059ce528cc5a5b3bf497e9">OS_TASK_ATTR</a>&#160;&#160;&#160;__attribute__((OS_task))</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Attribut fuer main-Funktion eines Threads.  <a href="#a436129a005059ce528cc5a5b3bf497e9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__thread_8h.html#a0246ca423f7aecf0681f5d26dceb710a">OS_SIGNAL_INITIALIZER</a>&#160;&#160;&#160;{0}</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialisierungsdaten fuer <a class="el" href="structos__signal__t.html" title="Signal-Typ zur Threadsynchronisation.">os_signal_t</a>.  <a href="#a0246ca423f7aecf0681f5d26dceb710a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__thread_8h.html#a0be74d4f0538be57711788fcfe6ee3a2">OS_KERNEL_LOG_SIZE</a>&#160;&#160;&#160;32</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Anzahl der Datensaetze, die im Kernel-LOG gepuffert werden koennen.  <a href="#a0be74d4f0538be57711788fcfe6ee3a2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__thread_8h.html#a29e5f7c4cb7a64b0d9157f2a9efdcdc5">os_enterCS</a>()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Schuetzt den folgenden Block (bis <a class="el" href="os__thread_8h.html#a146cd9b383b02d8e5424e2de5bfdf7e1" title="Beendet den kritischen Abschnitt wieder, der mit os_enterCS began.">os_exitCS()</a>) vor Threadswitches.  <a href="#a29e5f7c4cb7a64b0d9157f2a9efdcdc5"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Funktionen</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__thread_8h.html#a8dc4e2317522bc6d58ac8a66dc236745">os_kernel_log_init</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialisiert das Kernel-LOG.  <a href="#a8dc4e2317522bc6d58ac8a66dc236745"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__thread_8h.html#a011a849badc985823e31fee406aa910a">os_idle</a> (void) OS_TASK_ATTR</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Idle-Thread.  <a href="#a011a849badc985823e31fee406aa910a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__thread_8h.html#a146cd9b383b02d8e5424e2de5bfdf7e1">os_exitCS</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Beendet den kritischen Abschnitt wieder, der mit os_enterCS began.  <a href="#a146cd9b383b02d8e5424e2de5bfdf7e1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__thread_8h.html#afa82438e9832609bc5ffbddad166e1b7">os_switch_thread</a> (<a class="el" href="structTcb__t.html">Tcb_t</a> *from, <a class="el" href="structTcb__t.html">Tcb_t</a> *to)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Schaltet "von aussen" auf einen neuen Thread um.  <a href="#afa82438e9832609bc5ffbddad166e1b7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structTcb__t.html">Tcb_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__thread_8h.html#a2225be2eb34882c09ae7ad31a8b07207">os_create_thread</a> (void *pStack, void(*pIp)(void))</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Legt einen neuen Thread an und setzt ihn auf runnable.  <a href="#a2225be2eb34882c09ae7ad31a8b07207"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__thread_8h.html#af29e431cbca02833132a67de16011925">os_thread_yield</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Schaltet auf den Thread mit der naechst niedrigeren Prioritaet um, der lauffaehig ist, indem diesem der Rest der Zeitscheibe geschenkt wird.  <a href="#af29e431cbca02833132a67de16011925"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__thread_8h.html#aa62b6d29ae00ff288fd8969807a62b06">os_signal_set</a> (<a class="el" href="structos__signal__t.html">os_signal_t</a> *signal)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Blockiert den aktuellen Thread, bis ein Signal freigegeben wird.  <a href="#aa62b6d29ae00ff288fd8969807a62b06"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
Variablen</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structTcb__t.html">Tcb_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__thread_8h.html#a98e9aac6030735e7a03aa7b3681c43a2">os_threads</a> [OS_MAX_THREADS]</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Thread-Pool (ist gleichzeitig running- und waiting-queue)  <a href="#a98e9aac6030735e7a03aa7b3681c43a2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structTcb__t.html">Tcb_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__thread_8h.html#aa7c832fad63b24918265cadcd962e5ab">os_thread_running</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Zeiger auf den Thread, der zurzeit laeuft.  <a href="#aa7c832fad63b24918265cadcd962e5ab"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__thread_8h.html#a5a17b61842aee95cf659425f3967c8be">os_kernel_stack</a> []</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Kernel-Stack.  <a href="#a5a17b61842aee95cf659425f3967c8be"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__thread_8h.html#a577438ea72f5dcbdff5b1cc72d231440">os_idle_stack</a> []</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Stack des Idle-Threads.  <a href="#a577438ea72f5dcbdff5b1cc72d231440"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structos__signal__t.html">os_signal_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__thread_8h.html#a106f72a08737e37e3b19428051f6b8f7">dummy_signal</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Signal, das referenziert wird, wenn sonst keins gesetzt ist.  <a href="#a106f72a08737e37e3b19428051f6b8f7"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Ausf체hrliche Beschreibung</h2>
<div class="textblock"><p>Threadmanagement fuer BotOS. </p>
<dl class="author"><dt><b>Autor:</b></dt><dd>Timo Sandmann (<a href="mailto:mail@timosandmann.de">mail@timosandmann.de</a>) </dd></dl>
<dl class="date"><dt><b>Datum:</b></dt><dd>02.10.2007 </dd></dl>

<p>Definiert in Datei <a class="el" href="os__thread_8h_source.html">os_thread.h</a>.</p>
</div><hr/><h2>Makro-Dokumentation</h2>
<a class="anchor" id="aa752c91dfa509beabcf63cf37a8a7d6e"></a><!-- doxytag: member="os_thread.h::OS_CONTEXT_SIZE" ref="aa752c91dfa509beabcf63cf37a8a7d6e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OS_CONTEXT_SIZE&#160;&#160;&#160;19</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Groesse des Kontextes eines Threads [Byte], muss zum Code in <a class="el" href="os__thread_8h.html#afa82438e9832609bc5ffbddad166e1b7" title="Schaltet &quot;von aussen&quot; auf einen neuen Thread um.">os_switch_thread()</a> passen! </p>

<p>Definiert in Zeile <a class="el" href="os__thread_8h_source.html#l00051">51</a> der Datei <a class="el" href="os__thread_8h_source.html">os_thread.h</a>.</p>

<p>Wird benutzt von <a class="el" href="os__thread_8c_source.html#l00065">os_create_thread()</a>.</p>

</div>
</div>
<a class="anchor" id="a29e5f7c4cb7a64b0d9157f2a9efdcdc5"></a><!-- doxytag: member="os_thread.h::os_enterCS" ref="a29e5f7c4cb7a64b0d9157f2a9efdcdc5" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define os_enterCS</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Wert:</b><div class="fragment"><pre class="fragment">{ \
    os_scheduling_allowed = 0; \
    __asm__ __volatile__(<span class="stringliteral">&quot;&quot;</span>:::<span class="stringliteral">&quot;memory&quot;</span>); \
}
</pre></div>
<p>Schuetzt den folgenden Block (bis <a class="el" href="os__thread_8h.html#a146cd9b383b02d8e5424e2de5bfdf7e1" title="Beendet den kritischen Abschnitt wieder, der mit os_enterCS began.">os_exitCS()</a>) vor Threadswitches. </p>
<p>Ermoeglicht einfaches Locking zum exklusiven Ressourcen-Zugriff. Es ist allerdings keine Verschachtelung moeglich! Zwischen <a class="el" href="os__thread_8h.html#a29e5f7c4cb7a64b0d9157f2a9efdcdc5" title="Schuetzt den folgenden Block (bis os_exitCS()) vor Threadswitches.">os_enterCS()</a> und <a class="el" href="os__thread_8h.html#a146cd9b383b02d8e5424e2de5bfdf7e1" title="Beendet den kritischen Abschnitt wieder, der mit os_enterCS began.">os_exitCS()</a> sollte daher kein Funktionsaufruf erfolgen. </p>

<p>Definiert in Zeile <a class="el" href="os__thread_8h_source.html#l00119">119</a> der Datei <a class="el" href="os__thread_8h_source.html">os_thread.h</a>.</p>

<p>Wird benutzt von <a class="el" href="botfs-low_8c_source.html#l00190">botfs_acquire_lock_low()</a>, <a class="el" href="command_8c_source.html#l00333">command_write()</a>, <a class="el" href="command_8c_source.html#l00387">command_write_data()</a>, <a class="el" href="command_8c_source.html#l00356">command_write_rawdata_to()</a>, <a class="el" href="command_8c_source.html#l00318">command_write_to()</a>, <a class="el" href="display_8c_source.html#l00231">display_flash_puts()</a>, <a class="el" href="mmc_8c_source.html#l00458">mmc_init()</a>, <a class="el" href="mmc_8c_source.html#l00209">mmc_read_sector_spi()</a>, <a class="el" href="mmc_8c_source.html#l00292">mmc_write_sector_spi()</a>, <a class="el" href="os__scheduler_8c_source.html#l00093">os_calc_utilization()</a>, <a class="el" href="os__scheduler_8c_source.html#l00129">os_clear_utilization()</a>, <a class="el" href="os__thread_8c_source.html#l00065">os_create_thread()</a> und <a class="el" href="os__thread_8c_source.html#l00119">os_thread_yield()</a>.</p>

</div>
</div>
<a class="anchor" id="aa6afdd19d3022d101b8fc9942bb8422b"></a><!-- doxytag: member="os_thread.h::OS_IDLE_STACKSIZE" ref="aa6afdd19d3022d101b8fc9942bb8422b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OS_IDLE_STACKSIZE&#160;&#160;&#160;64</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Groesse des Idle-Stacks [Byte]. </p>

<p>Definiert in Zeile <a class="el" href="os__thread_8h_source.html#l00058">58</a> der Datei <a class="el" href="os__thread_8h_source.html">os_thread.h</a>.</p>

<p>Wird benutzt von <a class="el" href="init-low_8c_source.html#l00155">ctbot_init_low_last()</a> und <a class="el" href="os__scheduler_8c_source.html#l00274">os_display()</a>.</p>

</div>
</div>
<a class="anchor" id="aa6afdd19d3022d101b8fc9942bb8422b"></a><!-- doxytag: member="os_thread.h::OS_IDLE_STACKSIZE" ref="aa6afdd19d3022d101b8fc9942bb8422b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OS_IDLE_STACKSIZE&#160;&#160;&#160;192</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Groesse des Idle-Stacks [Byte]. </p>

<p>Definiert in Zeile <a class="el" href="os__thread_8h_source.html#l00058">58</a> der Datei <a class="el" href="os__thread_8h_source.html">os_thread.h</a>.</p>

</div>
</div>
<a class="anchor" id="a0be74d4f0538be57711788fcfe6ee3a2"></a><!-- doxytag: member="os_thread.h::OS_KERNEL_LOG_SIZE" ref="a0be74d4f0538be57711788fcfe6ee3a2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OS_KERNEL_LOG_SIZE&#160;&#160;&#160;32</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Anzahl der Datensaetze, die im Kernel-LOG gepuffert werden koennen. </p>

<p>Definiert in Zeile <a class="el" href="os__thread_8h_source.html#l00100">100</a> der Datei <a class="el" href="os__thread_8h_source.html">os_thread.h</a>.</p>

</div>
</div>
<a class="anchor" id="aa3a2a69d3b5ce639d363a8914b8eeaab"></a><!-- doxytag: member="os_thread.h::OS_KERNEL_STACKSIZE" ref="aa3a2a69d3b5ce639d363a8914b8eeaab" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OS_KERNEL_STACKSIZE&#160;&#160;&#160;36</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Groesse des Kernel-Stacks (fuer Timer-ISR) [Byte]. </p>

<p>Definiert in Zeile <a class="el" href="os__thread_8h_source.html#l00049">49</a> der Datei <a class="el" href="os__thread_8h_source.html">os_thread.h</a>.</p>

<p>Wird benutzt von <a class="el" href="timer-low_8c_source.html#l00052">ISR()</a> und <a class="el" href="os__thread_8c_source.html#l00065">os_create_thread()</a>.</p>

</div>
</div>
<a class="anchor" id="a42d66a999c19e795c22714a54fc2b6b2"></a><!-- doxytag: member="os_thread.h::OS_MAX_THREADS" ref="a42d66a999c19e795c22714a54fc2b6b2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OS_MAX_THREADS&#160;&#160;&#160;4</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>maximale Anzahl an Threads im System </p>

<p>Definiert in Zeile <a class="el" href="os__thread_8h_source.html#l00048">48</a> der Datei <a class="el" href="os__thread_8h_source.html">os_thread.h</a>.</p>

<p>Wird benutzt von <a class="el" href="os__scheduler_8c_source.html#l00093">os_calc_utilization()</a>, <a class="el" href="os__scheduler_8c_source.html#l00129">os_clear_utilization()</a>, <a class="el" href="os__thread_8c_source.html#l00065">os_create_thread()</a>, <a class="el" href="os__scheduler_8c_source.html#l00274">os_display()</a> und <a class="el" href="os__scheduler_8c_source.html#l00217">os_schedule()</a>.</p>

</div>
</div>
<a class="anchor" id="a0246ca423f7aecf0681f5d26dceb710a"></a><!-- doxytag: member="os_thread.h::OS_SIGNAL_INITIALIZER" ref="a0246ca423f7aecf0681f5d26dceb710a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OS_SIGNAL_INITIALIZER&#160;&#160;&#160;{0}</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialisierungsdaten fuer <a class="el" href="structos__signal__t.html" title="Signal-Typ zur Threadsynchronisation.">os_signal_t</a>. </p>

<p>Definiert in Zeile <a class="el" href="os__thread_8h_source.html#l00080">80</a> der Datei <a class="el" href="os__thread_8h_source.html">os_thread.h</a>.</p>

</div>
</div>
<a class="anchor" id="a436129a005059ce528cc5a5b3bf497e9"></a><!-- doxytag: member="os_thread.h::OS_TASK_ATTR" ref="a436129a005059ce528cc5a5b3bf497e9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OS_TASK_ATTR&#160;&#160;&#160;__attribute__((OS_task))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Attribut fuer main-Funktion eines Threads. </p>

<p>Definiert in Zeile <a class="el" href="os__thread_8h_source.html#l00079">79</a> der Datei <a class="el" href="os__thread_8h_source.html">os_thread.h</a>.</p>

</div>
</div>
<hr/><h2>Dokumentation der Funktionen</h2>
<a class="anchor" id="a2225be2eb34882c09ae7ad31a8b07207"></a><!-- doxytag: member="os_thread.h::os_create_thread" ref="a2225be2eb34882c09ae7ad31a8b07207" args="(void *pStack, void(*pIp)(void))" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structTcb__t.html">Tcb_t</a>* os_create_thread </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>pStack</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(void)&#160;</td>
          <td class="paramname"><em>pIp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Legt einen neuen Thread an und setzt ihn auf runnable. </p>
<p>Der zuerst angelegt Thread bekommt die hoechste Prioritaet, je spaeter ein Thread erzeugt wird, desto niedriger ist seine Prioritaet, das laesst sich auch nicht mehr aendern! </p>
<dl><dt><b>Parameter:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">*pStack</td><td>Zeiger auf den Stack (Ende!) des neuen Threads </td></tr>
    <tr><td class="paramname">*pIp</td><td>Zeiger auf die Main-Funktion des Threads (Instruction-Pointer) </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>R체ckgabe:</b></dt><dd>Zeiger auf den TCB des angelegten Threads</dd></dl>
<p>Legt einen neuen Thread an. Der zuerst angelegt Thread bekommt die hoechste Prioritaet, je spaeter ein Thread erzeugt wird, desto niedriger ist seine Prioritaet, das laesst sich auch nicht mehr aendern! </p>
<dl><dt><b>Parameter:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">*pStack</td><td>Zeiger auf den Stack (Ende!) des neuen Threads </td></tr>
    <tr><td class="paramname">*pIp</td><td>Zeiger auf die Main-Funktion des Threads (Instruction-Pointer) </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>R체ckgabe:</b></dt><dd>Zeiger auf den TCB des angelegten Threads </dd></dl>

<p>Definiert in Zeile <a class="el" href="os__thread_8c_source.html#l00065">65</a> der Datei <a class="el" href="os__thread_8c_source.html">os_thread.c</a>.</p>

<p>Benutzt <a class="el" href="unionos__ip__t.html#acf44de7f2ffeba1fa016e064cc6c190e">os_ip_t::bytes</a>, <a class="el" href="os__thread_8c_source.html#l00054">dummy_signal</a>, <a class="el" href="os__thread_8c_source.html#l00047">os_ip_t::hi8</a>, <a class="el" href="behaviour__drive__chess_8c_source.html#l00175">i</a>, <a class="el" href="os__thread_8c_source.html#l00044">os_ip_t::ip</a>, <a class="el" href="os__thread_8c_source.html#l00046">os_ip_t::lo8</a>, <a class="el" href="os__thread__pc_8c_source.html#l00043">LOG_DEBUG</a>, <a class="el" href="log_8h_source.html#l00309">LOG_ERROR</a>, <a class="el" href="os__thread_8h_source.html#l00051">OS_CONTEXT_SIZE</a>, <a class="el" href="os__thread_8h_source.html#l00119">os_enterCS</a>, <a class="el" href="os__thread_8c_source.html#l00108">os_exitCS()</a>, <a class="el" href="os__thread_8c_source.html#l00053">os_kernel_stack</a>, <a class="el" href="os__thread_8h_source.html#l00049">OS_KERNEL_STACKSIZE</a>, <a class="el" href="os__thread_8c_source.html#l00241">os_mask_stack()</a>, <a class="el" href="os__thread_8h_source.html#l00048">OS_MAX_THREADS</a>, <a class="el" href="os__scheduler_8c_source.html#l00049">os_scheduling_allowed</a>, <a class="el" href="os__thread_8c_source.html#l00051">os_threads</a>, <a class="el" href="behaviour__drive__chess_8c_source.html#l00163">p</a>, <a class="el" href="os__thread_8h_source.html#l00084">Tcb_t::stack</a> und <a class="el" href="os__thread_8h_source.html#l00087">Tcb_t::wait_for</a>.</p>

<p>Wird benutzt von <a class="el" href="init-low_8c_source.html#l00125">ctbot_init_low_1st()</a> und <a class="el" href="init-low_8c_source.html#l00155">ctbot_init_low_last()</a>.</p>

<p><div class="dynheader">
Hier ist ein Graph der zeigt, was diese Funktion aufruft:</div>
<div class="dyncontent">
<div class="center"><img src="os__thread_8h_a2225be2eb34882c09ae7ad31a8b07207_cgraph.png" border="0" usemap="#os__thread_8h_a2225be2eb34882c09ae7ad31a8b07207_cgraph" alt=""/></div>
<map name="os__thread_8h_a2225be2eb34882c09ae7ad31a8b07207_cgraph" id="os__thread_8h_a2225be2eb34882c09ae7ad31a8b07207_cgraph">
<area shape="rect" id="node3" href="os__thread_8h.html#a146cd9b383b02d8e5424e2de5bfdf7e1" title="Beendet den kritischen Abschnitt wieder, der mit os_enterCS began." alt="" coords="199,55,281,83"/><area shape="rect" id="node15" href="os__thread_8c.html#ac0440fe078802d66f53552e2eaec35fb" title="os_mask_stack" alt="" coords="183,106,297,134"/><area shape="rect" id="node5" href="os__scheduler_8h.html#aaf0ea29568109bcdfb1d527f223accad" title="os_schedule" alt="" coords="347,55,445,83"/><area shape="rect" id="node7" href="fifo_8c.html#a7b3f9ad457273c9717bff49113c84250" title="fifo_put_data" alt="" coords="508,30,607,58"/><area shape="rect" id="node13" href="os__thread_8h.html#afa82438e9832609bc5ffbddad166e1b7" title="Schaltet &quot;von aussen&quot; auf einen neuen Thread um." alt="" coords="495,81,620,109"/><area shape="rect" id="node9" href="builtins_8h.html#a41590bd57be6a89c1b9bcafe523207f2" title="Disables all interrupts by clearing the global interrupt mask." alt="" coords="676,5,791,33"/><area shape="rect" id="node11" href="os__thread__pc_8c.html#aa0b166109be9754de9b8b863b8d197c7" title="os_signal_unlock" alt="" coords="671,55,796,83"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a146cd9b383b02d8e5424e2de5bfdf7e1"></a><!-- doxytag: member="os_thread.h::os_exitCS" ref="a146cd9b383b02d8e5424e2de5bfdf7e1" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void os_exitCS </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Beendet den kritischen Abschnitt wieder, der mit os_enterCS began. </p>
<p>Falls ein Scheduler-Aufruf ansteht, wird er nun ausgefuehrt.</p>
<p>Beendet den kritischen Abschnitt wieder, der mit os_enterCS began. Falls ein Scheduler-Aufruf ansteht, wird er nun ausgefuehrt. </p>

<p>Definiert in Zeile <a class="el" href="os__thread_8c_source.html#l00108">108</a> der Datei <a class="el" href="os__thread_8c_source.html">os_thread.c</a>.</p>

<p>Benutzt <a class="el" href="os__scheduler_8c_source.html#l00217">os_schedule()</a>, <a class="el" href="os__scheduler_8c_source.html#l00049">os_scheduling_allowed</a> und <a class="el" href="timer_8h_source.html#l00088">TIMER_GET_TICKCOUNT_32</a>.</p>

<p>Wird benutzt von <a class="el" href="botfs-low_8c_source.html#l00190">botfs_acquire_lock_low()</a>, <a class="el" href="command_8c_source.html#l00333">command_write()</a>, <a class="el" href="command_8c_source.html#l00387">command_write_data()</a>, <a class="el" href="command_8c_source.html#l00356">command_write_rawdata_to()</a>, <a class="el" href="command_8c_source.html#l00318">command_write_to()</a>, <a class="el" href="display_8c_source.html#l00231">display_flash_puts()</a>, <a class="el" href="mmc_8c_source.html#l00458">mmc_init()</a>, <a class="el" href="mmc_8c_source.html#l00209">mmc_read_sector_spi()</a>, <a class="el" href="mmc_8c_source.html#l00292">mmc_write_sector_spi()</a>, <a class="el" href="os__scheduler_8c_source.html#l00093">os_calc_utilization()</a>, <a class="el" href="os__scheduler_8c_source.html#l00129">os_clear_utilization()</a> und <a class="el" href="os__thread_8c_source.html#l00065">os_create_thread()</a>.</p>

<p><div class="dynheader">
Hier ist ein Graph der zeigt, was diese Funktion aufruft:</div>
<div class="dyncontent">
<div class="center"><img src="os__thread_8h_a146cd9b383b02d8e5424e2de5bfdf7e1_cgraph.png" border="0" usemap="#os__thread_8h_a146cd9b383b02d8e5424e2de5bfdf7e1_cgraph" alt=""/></div>
<map name="os__thread_8h_a146cd9b383b02d8e5424e2de5bfdf7e1_cgraph" id="os__thread_8h_a146cd9b383b02d8e5424e2de5bfdf7e1_cgraph">
<area shape="rect" id="node3" href="os__scheduler_8h.html#aaf0ea29568109bcdfb1d527f223accad" title="os_schedule" alt="" coords="139,55,237,83"/><area shape="rect" id="node5" href="fifo_8c.html#a7b3f9ad457273c9717bff49113c84250" title="fifo_put_data" alt="" coords="300,30,399,58"/><area shape="rect" id="node11" href="os__thread_8h.html#afa82438e9832609bc5ffbddad166e1b7" title="Schaltet &quot;von aussen&quot; auf einen neuen Thread um." alt="" coords="287,81,412,109"/><area shape="rect" id="node7" href="builtins_8h.html#a41590bd57be6a89c1b9bcafe523207f2" title="Disables all interrupts by clearing the global interrupt mask." alt="" coords="468,5,583,33"/><area shape="rect" id="node9" href="os__thread__pc_8c.html#aa0b166109be9754de9b8b863b8d197c7" title="os_signal_unlock" alt="" coords="463,55,588,83"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a011a849badc985823e31fee406aa910a"></a><!-- doxytag: member="os_thread.h::os_idle" ref="a011a849badc985823e31fee406aa910a" args="(void) OS_TASK_ATTR" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void os_idle </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Idle-Thread. </p>
<p>Idle-Thread </p>

<p>Definiert in Zeile <a class="el" href="os__scheduler_8c_source.html#l00191">191</a> der Datei <a class="el" href="os__scheduler_8c_source.html">os_scheduler.c</a>.</p>

<p>Benutzt <a class="el" href="fifo_8h_source.html#l00047">fifo_t::count</a>, <a class="el" href="fifo_8c_source.html#l00147">fifo_get_data()</a>, <a class="el" href="os__scheduler_8c_source.html#l00063">kernel_log_t::from</a>, <a class="el" href="log_8h_source.html#l00311">LOG_RAW</a>, <a class="el" href="os__scheduler_8c_source.html#l00062">kernel_log_t::time</a> und <a class="el" href="os__scheduler_8c_source.html#l00064">kernel_log_t::to</a>.</p>

<p>Wird benutzt von <a class="el" href="init-low_8c_source.html#l00155">ctbot_init_low_last()</a>.</p>

<p><div class="dynheader">
Hier ist ein Graph der zeigt, was diese Funktion aufruft:</div>
<div class="dyncontent">
<div class="center"><img src="os__thread_8h_a011a849badc985823e31fee406aa910a_cgraph.png" border="0" usemap="#os__thread_8h_a011a849badc985823e31fee406aa910a_cgraph" alt=""/></div>
<map name="os__thread_8h_a011a849badc985823e31fee406aa910a_cgraph" id="os__thread_8h_a011a849badc985823e31fee406aa910a_cgraph">
<area shape="rect" id="node3" href="fifo_8c.html#ac4fa5e37b6f7988d56cae519d4ca33b7" title="Liefert length Bytes aus der FIFO." alt="" coords="120,77,219,105"/><area shape="rect" id="node5" href="builtins_8h.html#a41590bd57be6a89c1b9bcafe523207f2" title="Disables all interrupts by clearing the global interrupt mask." alt="" coords="777,7,892,35"/><area shape="rect" id="node7" href="os__thread__pc_8c.html#ae59b1320daae9dc263c512b326e91c00" title="os_signal_lock" alt="" coords="277,51,389,79"/><area shape="rect" id="node9" href="os__thread__pc_8c.html#a6fad7ee5233ef39834eb7afc437b0105" title="os_signal_release" alt="" coords="267,102,400,130"/><area shape="rect" id="node11" href="os__thread_8h.html#aa62b6d29ae00ff288fd8969807a62b06" title="Blockiert den aktuellen Thread, bis ein Signal freigegeben wird." alt="" coords="281,153,385,181"/><area shape="rect" id="node13" href="os__scheduler_8h.html#aaf0ea29568109bcdfb1d527f223accad" title="os_schedule" alt="" coords="448,139,547,167"/><area shape="rect" id="node15" href="fifo_8c.html#a7b3f9ad457273c9717bff49113c84250" title="fifo_put_data" alt="" coords="609,63,708,91"/><area shape="rect" id="node20" href="os__thread_8h.html#afa82438e9832609bc5ffbddad166e1b7" title="Schaltet &quot;von aussen&quot; auf einen neuen Thread um." alt="" coords="596,139,721,167"/><area shape="rect" id="node18" href="os__thread__pc_8c.html#aa0b166109be9754de9b8b863b8d197c7" title="os_signal_unlock" alt="" coords="772,63,897,91"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a8dc4e2317522bc6d58ac8a66dc236745"></a><!-- doxytag: member="os_thread.h::os_kernel_log_init" ref="a8dc4e2317522bc6d58ac8a66dc236745" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void os_kernel_log_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialisiert das Kernel-LOG. </p>
<p>Initialisiert das Kernel-LOG </p>

<p>Definiert in Zeile <a class="el" href="os__scheduler_8c_source.html#l00074">74</a> der Datei <a class="el" href="os__scheduler_8c_source.html">os_scheduler.c</a>.</p>

<p>Benutzt <a class="el" href="fifo_8c_source.html#l00039">fifo_init()</a>.</p>

<p>Wird benutzt von <a class="el" href="init-low_8c_source.html#l00125">ctbot_init_low_1st()</a>.</p>

<p><div class="dynheader">
Hier ist ein Graph der zeigt, was diese Funktion aufruft:</div>
<div class="dyncontent">
<div class="center"><img src="os__thread_8h_a8dc4e2317522bc6d58ac8a66dc236745_cgraph.png" border="0" usemap="#os__thread_8h_a8dc4e2317522bc6d58ac8a66dc236745_cgraph" alt=""/></div>
<map name="os__thread_8h_a8dc4e2317522bc6d58ac8a66dc236745_cgraph" id="os__thread_8h_a8dc4e2317522bc6d58ac8a66dc236745_cgraph">
<area shape="rect" id="node3" href="fifo_8c.html#a125e7099a807c9ec1e62227f84723248" title="fifo_init" alt="" coords="185,5,247,33"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa62b6d29ae00ff288fd8969807a62b06"></a><!-- doxytag: member="os_thread.h::os_signal_set" ref="aa62b6d29ae00ff288fd8969807a62b06" args="(os_signal_t *signal)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void os_signal_set </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structos__signal__t.html">os_signal_t</a> *&#160;</td>
          <td class="paramname"><em>signal</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Blockiert den aktuellen Thread, bis ein Signal freigegeben wird. </p>
<dl><dt><b>Parameter:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">*signal</td><td>Zeiger auf Signal</td></tr>
  </table>
  </dd>
</dl>
<p>Blockiert den aktuellen Thread, bis ein Signal freigegeben wird </p>
<dl><dt><b>Parameter:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">*signal</td><td>Zeiger auf Signal </td></tr>
  </table>
  </dd>
</dl>

<p>Definiert in Zeile <a class="el" href="os__thread_8c_source.html#l00153">153</a> der Datei <a class="el" href="os__thread_8c_source.html">os_thread.c</a>.</p>

<p>Benutzt <a class="el" href="os__thread_8h_source.html#l00044">os_signal_t::cond</a>, <a class="el" href="os__thread__pc_8c_source.html#l00036">DEBUG_THREAD_N</a>, <a class="el" href="os__thread__pc_8c_source.html#l00043">LOG_DEBUG</a>, <a class="el" href="os__thread_8h_source.html#l00043">os_signal_t::mutex</a>, <a class="el" href="os__scheduler_8c_source.html#l00217">os_schedule()</a>, <a class="el" href="timer_8h_source.html#l00088">TIMER_GET_TICKCOUNT_32</a>, <a class="el" href="os__thread_8h_source.html#l00041">os_signal_t::value</a> und <a class="el" href="os__thread_8h_source.html#l00087">Tcb_t::wait_for</a>.</p>

<p>Wird benutzt von <a class="el" href="fifo_8c_source.html#l00147">fifo_get_data()</a> und <a class="el" href="map_8c_source.html#l00430">map_flush_cache()</a>.</p>

<p><div class="dynheader">
Hier ist ein Graph der zeigt, was diese Funktion aufruft:</div>
<div class="dyncontent">
<div class="center"><img src="os__thread_8h_aa62b6d29ae00ff288fd8969807a62b06_cgraph.png" border="0" usemap="#os__thread_8h_aa62b6d29ae00ff288fd8969807a62b06_cgraph" alt=""/></div>
<map name="os__thread_8h_aa62b6d29ae00ff288fd8969807a62b06_cgraph" id="os__thread_8h_aa62b6d29ae00ff288fd8969807a62b06_cgraph">
<area shape="rect" id="node3" href="os__scheduler_8h.html#aaf0ea29568109bcdfb1d527f223accad" title="os_schedule" alt="" coords="160,55,259,83"/><area shape="rect" id="node5" href="fifo_8c.html#a7b3f9ad457273c9717bff49113c84250" title="fifo_put_data" alt="" coords="321,30,420,58"/><area shape="rect" id="node11" href="os__thread_8h.html#afa82438e9832609bc5ffbddad166e1b7" title="Schaltet &quot;von aussen&quot; auf einen neuen Thread um." alt="" coords="308,81,433,109"/><area shape="rect" id="node7" href="builtins_8h.html#a41590bd57be6a89c1b9bcafe523207f2" title="Disables all interrupts by clearing the global interrupt mask." alt="" coords="489,5,604,33"/><area shape="rect" id="node9" href="os__thread__pc_8c.html#aa0b166109be9754de9b8b863b8d197c7" title="os_signal_unlock" alt="" coords="484,55,609,83"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="afa82438e9832609bc5ffbddad166e1b7"></a><!-- doxytag: member="os_thread.h::os_switch_thread" ref="afa82438e9832609bc5ffbddad166e1b7" args="(Tcb_t *from, Tcb_t *to)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void os_switch_thread </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structTcb__t.html">Tcb_t</a> *&#160;</td>
          <td class="paramname"><em>from</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structTcb__t.html">Tcb_t</a> *&#160;</td>
          <td class="paramname"><em>to</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Schaltet "von aussen" auf einen neuen Thread um. </p>
<p>=&gt; kernel threadswitch Achtung, es wird erwartet, dass Interrupts an sind. Sollte eigentlich nur vom Scheduler aus aufgerufen werden! </p>
<dl><dt><b>Parameter:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">*from</td><td>Zeiger auf TCB des aktuell laufenden Threads </td></tr>
    <tr><td class="paramname">*to</td><td>Zeiger auf TCB des Threads, der nun laufen soll</td></tr>
  </table>
  </dd>
</dl>
<p>Schaltet "von aussen" auf einen neuen Thread um. =&gt; kernel threadswitch Achtung, es wird erwartet, dass Interrupts an sind. Sollte eigentlich nur vom Scheduler aus aufgerufen werden! </p>
<dl><dt><b>Parameter:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">*from</td><td>Zeiger auf TCB des aktuell laufenden Threads </td></tr>
    <tr><td class="paramname">*to</td><td>Zeiger auf TCB des Threads, der nun laufen soll </td></tr>
  </table>
  </dd>
</dl>

<p>Definiert in Zeile <a class="el" href="os__thread_8c_source.html#l00166">166</a> der Datei <a class="el" href="os__thread_8c_source.html">os_thread.c</a>.</p>

<p>Benutzt <a class="el" href="os__thread_8h_source.html#l00084">Tcb_t::stack</a>.</p>

<p>Wird benutzt von <a class="el" href="os__scheduler_8c_source.html#l00217">os_schedule()</a>.</p>

</div>
</div>
<a class="anchor" id="af29e431cbca02833132a67de16011925"></a><!-- doxytag: member="os_thread.h::os_thread_yield" ref="af29e431cbca02833132a67de16011925" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void os_thread_yield </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Schaltet auf den Thread mit der naechst niedrigeren Prioritaet um, der lauffaehig ist, indem diesem der Rest der Zeitscheibe geschenkt wird. </p>
<p>Schaltet auf den Thread mit der naechst niedrigeren Prioritaet um, der lauffaehig ist, indem diesem der Rest der Zeitscheibe geschenkt wird. Auf PC ueberlassen wir diese Aufgabe dem Scheduler </p>

<p>Definiert in Zeile <a class="el" href="os__thread_8c_source.html#l00119">119</a> der Datei <a class="el" href="os__thread_8c_source.html">os_thread.c</a>.</p>

<p>Benutzt <a class="el" href="os__thread_8h_source.html#l00086">Tcb_t::lastSchedule</a>, <a class="el" href="command_8c_source.html#l00071">LOG_DEBUG</a>, <a class="el" href="os__thread_8h_source.html#l00074">os_stat_data_t::missed_deadlines</a>, <a class="el" href="timer_8h_source.html#l00040">MS_TO_TICKS</a>, <a class="el" href="os__thread_8h_source.html#l00085">Tcb_t::nextSchedule</a>, <a class="el" href="os__thread_8h_source.html#l00119">os_enterCS</a>, <a class="el" href="os__scheduler_8c_source.html#l00217">os_schedule()</a>, <a class="el" href="os__scheduler_8c_source.html#l00049">os_scheduling_allowed</a>, <a class="el" href="os__scheduler_8h_source.html#l00034">OS_TIME_SLICE</a>, <a class="el" href="os__thread_8h_source.html#l00073">os_stat_data_t::runtime</a>, <a class="el" href="os__thread_8h_source.html#l00089">Tcb_t::statistics</a>, <a class="el" href="timer_8h_source.html#l00088">TIMER_GET_TICKCOUNT_32</a> und <a class="el" href="timer_8h_source.html#l00154">TIMER_STEPS</a>.</p>

<p>Wird benutzt von <a class="el" href="botcontrol_8c_source.html#l00080">post_behaviour()</a>.</p>

<p><div class="dynheader">
Hier ist ein Graph der zeigt, was diese Funktion aufruft:</div>
<div class="dyncontent">
<div class="center"><img src="os__thread_8h_af29e431cbca02833132a67de16011925_cgraph.png" border="0" usemap="#os__thread_8h_af29e431cbca02833132a67de16011925_cgraph" alt=""/></div>
<map name="os__thread_8h_af29e431cbca02833132a67de16011925_cgraph" id="os__thread_8h_af29e431cbca02833132a67de16011925_cgraph">
<area shape="rect" id="node3" href="os__scheduler_8h.html#aaf0ea29568109bcdfb1d527f223accad" title="os_schedule" alt="" coords="173,55,272,83"/><area shape="rect" id="node5" href="fifo_8c.html#a7b3f9ad457273c9717bff49113c84250" title="fifo_put_data" alt="" coords="335,30,433,58"/><area shape="rect" id="node11" href="os__thread_8h.html#afa82438e9832609bc5ffbddad166e1b7" title="Schaltet &quot;von aussen&quot; auf einen neuen Thread um." alt="" coords="321,81,447,109"/><area shape="rect" id="node7" href="builtins_8h.html#a41590bd57be6a89c1b9bcafe523207f2" title="Disables all interrupts by clearing the global interrupt mask." alt="" coords="503,5,617,33"/><area shape="rect" id="node9" href="os__thread__pc_8c.html#aa0b166109be9754de9b8b863b8d197c7" title="os_signal_unlock" alt="" coords="497,55,623,83"/></map>
</div>
</p>

</div>
</div>
<hr/><h2>Variablen-Dokumentation</h2>
<a class="anchor" id="a106f72a08737e37e3b19428051f6b8f7"></a><!-- doxytag: member="os_thread.h::dummy_signal" ref="a106f72a08737e37e3b19428051f6b8f7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structos__signal__t.html">os_signal_t</a> <a class="el" href="os__thread_8c.html#a106f72a08737e37e3b19428051f6b8f7">dummy_signal</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Signal, das referenziert wird, wenn sonst keins gesetzt ist. </p>
<p>Signal, das referenziert wird, wenn sonst keins gesetzt ist </p>

<p>Definiert in Zeile <a class="el" href="os__thread_8c_source.html#l00054">54</a> der Datei <a class="el" href="os__thread_8c_source.html">os_thread.c</a>.</p>

<p>Wird benutzt von <a class="el" href="os__thread_8c_source.html#l00065">os_create_thread()</a>.</p>

</div>
</div>
<a class="anchor" id="a577438ea72f5dcbdff5b1cc72d231440"></a><!-- doxytag: member="os_thread.h::os_idle_stack" ref="a577438ea72f5dcbdff5b1cc72d231440" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t <a class="el" href="os__scheduler_8c.html#acb003059db99b21fa9103de9f505c216">os_idle_stack</a>[]</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Stack des Idle-Threads. </p>
<p>Stack des Idle-Threads </p>

<p>Definiert in Zeile <a class="el" href="os__scheduler_8c_source.html#l00051">51</a> der Datei <a class="el" href="os__scheduler_8c_source.html">os_scheduler.c</a>.</p>

<p>Wird benutzt von <a class="el" href="init-low_8c_source.html#l00155">ctbot_init_low_last()</a>, <a class="el" href="os__scheduler_8c_source.html#l00274">os_display()</a> und <a class="el" href="os__thread_8c_source.html#l00265">os_print_stackusage()</a>.</p>

</div>
</div>
<a class="anchor" id="a5a17b61842aee95cf659425f3967c8be"></a><!-- doxytag: member="os_thread.h::os_kernel_stack" ref="a5a17b61842aee95cf659425f3967c8be" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t <a class="el" href="os__thread_8c.html#a684b331eb0a74daf505e2ae7e9f1bb64">os_kernel_stack</a>[]</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Kernel-Stack. </p>
<p>Kernel-Stack </p>

<p>Definiert in Zeile <a class="el" href="os__thread_8c_source.html#l00053">53</a> der Datei <a class="el" href="os__thread_8c_source.html">os_thread.c</a>.</p>

<p>Wird benutzt von <a class="el" href="timer-low_8c_source.html#l00052">ISR()</a>, <a class="el" href="os__thread_8c_source.html#l00065">os_create_thread()</a> und <a class="el" href="os__thread_8c_source.html#l00265">os_print_stackusage()</a>.</p>

</div>
</div>
<a class="anchor" id="aa7c832fad63b24918265cadcd962e5ab"></a><!-- doxytag: member="os_thread.h::os_thread_running" ref="aa7c832fad63b24918265cadcd962e5ab" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structTcb__t.html">Tcb_t</a>* <a class="el" href="os__thread__pc_8c.html#aa7c832fad63b24918265cadcd962e5ab">os_thread_running</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Zeiger auf den Thread, der zurzeit laeuft. </p>
<p>Zeiger auf den TCB des Threads, der gerade laeuft</p>
<p>Zeiger auf den Thread, der gerade laeuft </p>

<p>Definiert in Zeile <a class="el" href="os__thread_8c_source.html#l00052">52</a> der Datei <a class="el" href="os__thread_8c_source.html">os_thread.c</a>.</p>

<p>Wird benutzt von <a class="el" href="botfs-low_8c_source.html#l00190">botfs_acquire_lock_low()</a> und <a class="el" href="os__scheduler_8c_source.html#l00217">os_schedule()</a>.</p>

</div>
</div>
<a class="anchor" id="a98e9aac6030735e7a03aa7b3681c43a2"></a><!-- doxytag: member="os_thread.h::os_threads" ref="a98e9aac6030735e7a03aa7b3681c43a2" args="[OS_MAX_THREADS]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structTcb__t.html">Tcb_t</a> <a class="el" href="os__thread__pc_8c.html#a98e9aac6030735e7a03aa7b3681c43a2">os_threads</a>[OS_MAX_THREADS]</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Thread-Pool (ist gleichzeitig running- und waiting-queue) </p>
<p>Array aller TCBs</p>
<p>Array aller Threads </p>

<p>Definiert in Zeile <a class="el" href="os__thread_8c_source.html#l00051">51</a> der Datei <a class="el" href="os__thread_8c_source.html">os_thread.c</a>.</p>

<p>Wird benutzt von <a class="el" href="os__scheduler_8c_source.html#l00093">os_calc_utilization()</a>, <a class="el" href="os__scheduler_8c_source.html#l00129">os_clear_utilization()</a>, <a class="el" href="os__thread_8c_source.html#l00065">os_create_thread()</a>, <a class="el" href="os__scheduler_8c_source.html#l00274">os_display()</a> und <a class="el" href="os__scheduler_8c_source.html#l00217">os_schedule()</a>.</p>

</div>
</div>
</div>


<hr class="footer"/><address class="footer"><small>
Erzeugt am Mit Feb 29 2012 14:18:12 f체r c't-Bot von &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.5.1
</small></address>

</body>
</html>
