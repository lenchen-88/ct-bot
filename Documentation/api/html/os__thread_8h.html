<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>c't-Bot: os_thread.h-Dateireferenz</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />



</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">c't-Bot
   &#160;<span id="projectnumber">1818</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Erzeugt von Doxygen 1.7.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Hauptseite</span></a></li>
      <li><a href="pages.html"><span>Zusätzliche&#160;Informationen</span></a></li>
      <li><a href="annotated.html"><span>Datenstrukturen</span></a></li>
      <li class="current"><a href="files.html"><span>Dateien</span></a></li>
      <li><a href="dirs.html"><span>Verzeichnisse</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>Auflistung&#160;der&#160;Dateien</span></a></li>
      <li><a href="globals.html"><span>Datei-Elemente</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="dir_a0fca93e65e0dd30a74a1e6addb2ee0e.html">include</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#nested-classes">Datenstrukturen</a> &#124;
<a href="#define-members">Makrodefinitionen</a> &#124;
<a href="#func-members">Funktionen</a> &#124;
<a href="#var-members">Variablen</a>  </div>
  <div class="headertitle">
<div class="title">os_thread.h-Dateireferenz</div>  </div>
</div>
<div class="contents">

<p>Threadmanagement fuer BotOS.  
<a href="#details">Mehr ...</a></p>
<div class="textblock"><code>#include &lt;pthread.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="timer_8h_source.html">timer.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="os__scheduler_8h_source.html">os_scheduler.h</a>&quot;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include-Abhängigkeitsdiagramm für os_thread.h:</div>
<div class="dyncontent">
<div class="center"><img src="os__thread_8h__incl.png" border="0" usemap="#os__thread_8h" alt=""/></div>
<map name="os__thread_8h" id="os__thread_8h">
</map>
</div>
</div><div class="textblock"><div class="dynheader">
Dieser Graph zeigt, welche Datei direkt oder indirekt diese Datei enthält:</div>
<div class="dyncontent">
<div class="center"><img src="os__thread_8h__dep__incl.png" border="0" usemap="#os__thread_8hdep" alt=""/></div>
<map name="os__thread_8hdep" id="os__thread_8hdep">
</map>
</div>
</div>
<p><a href="os__thread_8h_source.html">gehe zum Quellcode dieser Datei</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Datenstrukturen</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structos__signal__t.html">os_signal_t</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structos__stat__data__t.html">os_stat_data_t</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structTcb__t.html">Tcb_t</a></td></tr>
<tr><td colspan="2"><h2><a name="define-members"></a>
Makrodefinitionen</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__thread_8h.html#a42d66a999c19e795c22714a54fc2b6b2">OS_MAX_THREADS</a>&#160;&#160;&#160;4</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__thread_8h.html#aa3a2a69d3b5ce639d363a8914b8eeaab">OS_KERNEL_STACKSIZE</a>&#160;&#160;&#160;36</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__thread_8h.html#aa6afdd19d3022d101b8fc9942bb8422b">OS_IDLE_STACKSIZE</a>&#160;&#160;&#160;64</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__thread_8h.html#aa752c91dfa509beabcf63cf37a8a7d6e">OS_CONTEXT_SIZE</a>&#160;&#160;&#160;19</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__thread_8h.html#aa6afdd19d3022d101b8fc9942bb8422b">OS_IDLE_STACKSIZE</a>&#160;&#160;&#160;192</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__thread_8h.html#a436129a005059ce528cc5a5b3bf497e9">OS_TASK_ATTR</a>&#160;&#160;&#160;__attribute__((OS_task))</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__thread_8h.html#a0be74d4f0538be57711788fcfe6ee3a2">OS_KERNEL_LOG_SIZE</a>&#160;&#160;&#160;32</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__thread_8h.html#a29e5f7c4cb7a64b0d9157f2a9efdcdc5">os_enterCS</a>()</td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Funktionen</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__thread_8h.html#a8dc4e2317522bc6d58ac8a66dc236745">os_kernel_log_init</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__thread_8h.html#a011a849badc985823e31fee406aa910a">os_idle</a> (void) OS_TASK_ATTR</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__thread_8h.html#a146cd9b383b02d8e5424e2de5bfdf7e1">os_exitCS</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__thread_8h.html#afa82438e9832609bc5ffbddad166e1b7">os_switch_thread</a> (<a class="el" href="structTcb__t.html">Tcb_t</a> *from, <a class="el" href="structTcb__t.html">Tcb_t</a> *to)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structTcb__t.html">Tcb_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__thread_8h.html#a2225be2eb34882c09ae7ad31a8b07207">os_create_thread</a> (void *pStack, void(*pIp)(void))</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__thread_8h.html#af29e431cbca02833132a67de16011925">os_thread_yield</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__thread_8h.html#aa62b6d29ae00ff288fd8969807a62b06">os_signal_set</a> (<a class="el" href="structos__signal__t.html">os_signal_t</a> *signal)</td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
Variablen</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structTcb__t.html">Tcb_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__thread_8h.html#a98e9aac6030735e7a03aa7b3681c43a2">os_threads</a> [OS_MAX_THREADS]</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structTcb__t.html">Tcb_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__thread_8h.html#aa7c832fad63b24918265cadcd962e5ab">os_thread_running</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__thread_8h.html#a5a17b61842aee95cf659425f3967c8be">os_kernel_stack</a> []</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__thread_8h.html#a577438ea72f5dcbdff5b1cc72d231440">os_idle_stack</a> []</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structos__signal__t.html">os_signal_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__thread_8h.html#a106f72a08737e37e3b19428051f6b8f7">dummy_signal</a></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Ausführliche Beschreibung</h2>
<div class="textblock"><p>Threadmanagement fuer BotOS. </p>
<dl class="author"><dt><b>Autor:</b></dt><dd>Timo Sandmann (<a href="mailto:mail@timosandmann.de">mail@timosandmann.de</a>) </dd></dl>
<dl class="date"><dt><b>Datum:</b></dt><dd>02.10.2007 </dd></dl>

<p>Definiert in Datei <a class="el" href="os__thread_8h_source.html">os_thread.h</a>.</p>
</div><hr/><h2>Makro-Dokumentation</h2>
<a class="anchor" id="aa752c91dfa509beabcf63cf37a8a7d6e"></a><!-- doxytag: member="os_thread.h::OS_CONTEXT_SIZE" ref="aa752c91dfa509beabcf63cf37a8a7d6e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OS_CONTEXT_SIZE&#160;&#160;&#160;19</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Groesse des Kontextes eines Threads [Byte], muss zum Code in <a class="el" href="os__thread_8h.html#afa82438e9832609bc5ffbddad166e1b7">os_switch_thread()</a> passen! </p>

<p>Definiert in Zeile <a class="el" href="os__thread_8h_source.html#l00051">51</a> der Datei <a class="el" href="os__thread_8h_source.html">os_thread.h</a>.</p>

<p>Wird benutzt von <a class="el" href="os__thread_8c_source.html#l00065">os_create_thread()</a>.</p>

</div>
</div>
<a class="anchor" id="a29e5f7c4cb7a64b0d9157f2a9efdcdc5"></a><!-- doxytag: member="os_thread.h::os_enterCS" ref="a29e5f7c4cb7a64b0d9157f2a9efdcdc5" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define os_enterCS</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Wert:</b><div class="fragment"><pre class="fragment">{ \
    os_scheduling_allowed = 0; \
    __asm__ __volatile__(<span class="stringliteral">&quot;&quot;</span>:::<span class="stringliteral">&quot;memory&quot;</span>); \
}
</pre></div><p>Schuetzt den folgenden Block (bis <a class="el" href="os__thread_8h.html#a146cd9b383b02d8e5424e2de5bfdf7e1">os_exitCS()</a>) vor Threadswitches. Ermoeglicht einfaches Locking zum exklusiven Ressourcen-Zugriff. Es ist allerdings keine Verschachtelung moeglich! Zwischen <a class="el" href="os__thread_8h.html#a29e5f7c4cb7a64b0d9157f2a9efdcdc5">os_enterCS()</a> und <a class="el" href="os__thread_8h.html#a146cd9b383b02d8e5424e2de5bfdf7e1">os_exitCS()</a> sollte daher kein Funktionsaufruf erfolgen. </p>

<p>Definiert in Zeile <a class="el" href="os__thread_8h_source.html#l00118">118</a> der Datei <a class="el" href="os__thread_8h_source.html">os_thread.h</a>.</p>

<p>Wird benutzt von <a class="el" href="botfs-low_8c_source.html#l00191">botfs_acquire_lock_low()</a>, <a class="el" href="command_8c_source.html#l00263">command_write_to()</a>, <a class="el" href="command_8c_source.html#l00278">command_write()</a>, <a class="el" href="command_8c_source.html#l00301">command_write_rawdata_to()</a>, <a class="el" href="command_8c_source.html#l00332">command_write_data()</a>, <a class="el" href="display_8c_source.html#l00231">display_flash_puts()</a>, <a class="el" href="mmc_8c_source.html#l00209">mmc_read_sector_spi()</a>, <a class="el" href="mmc_8c_source.html#l00292">mmc_write_sector_spi()</a>, <a class="el" href="mmc_8c_source.html#l00458">mmc_init()</a>, <a class="el" href="os__scheduler_8c_source.html#l00093">os_calc_utilization()</a>, <a class="el" href="os__scheduler_8c_source.html#l00129">os_clear_utilization()</a>, <a class="el" href="os__thread_8c_source.html#l00065">os_create_thread()</a> und <a class="el" href="os__thread_8c_source.html#l00119">os_thread_yield()</a>.</p>

</div>
</div>
<a class="anchor" id="aa6afdd19d3022d101b8fc9942bb8422b"></a><!-- doxytag: member="os_thread.h::OS_IDLE_STACKSIZE" ref="aa6afdd19d3022d101b8fc9942bb8422b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OS_IDLE_STACKSIZE&#160;&#160;&#160;64</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Groesse des Idle-Stacks [Byte] </p>

<p>Definiert in Zeile <a class="el" href="os__thread_8h_source.html#l00058">58</a> der Datei <a class="el" href="os__thread_8h_source.html">os_thread.h</a>.</p>

<p>Wird benutzt von <a class="el" href="init-low_8c_source.html#l00155">ctbot_init_low_last()</a> und <a class="el" href="os__scheduler_8c_source.html#l00274">os_display()</a>.</p>

</div>
</div>
<a class="anchor" id="aa6afdd19d3022d101b8fc9942bb8422b"></a><!-- doxytag: member="os_thread.h::OS_IDLE_STACKSIZE" ref="aa6afdd19d3022d101b8fc9942bb8422b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OS_IDLE_STACKSIZE&#160;&#160;&#160;192</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Groesse des Idle-Stacks [Byte] </p>

<p>Definiert in Zeile <a class="el" href="os__thread_8h_source.html#l00058">58</a> der Datei <a class="el" href="os__thread_8h_source.html">os_thread.h</a>.</p>

</div>
</div>
<a class="anchor" id="a0be74d4f0538be57711788fcfe6ee3a2"></a><!-- doxytag: member="os_thread.h::OS_KERNEL_LOG_SIZE" ref="a0be74d4f0538be57711788fcfe6ee3a2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OS_KERNEL_LOG_SIZE&#160;&#160;&#160;32</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Anzahl der Datensaetze, die im Kernel-LOG gepuffert werden koennen </p>

<p>Definiert in Zeile <a class="el" href="os__thread_8h_source.html#l00099">99</a> der Datei <a class="el" href="os__thread_8h_source.html">os_thread.h</a>.</p>

</div>
</div>
<a class="anchor" id="aa3a2a69d3b5ce639d363a8914b8eeaab"></a><!-- doxytag: member="os_thread.h::OS_KERNEL_STACKSIZE" ref="aa3a2a69d3b5ce639d363a8914b8eeaab" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OS_KERNEL_STACKSIZE&#160;&#160;&#160;36</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Groesse des Kernel-Stacks (fuer Timer-ISR) [Byte] </p>

<p>Definiert in Zeile <a class="el" href="os__thread_8h_source.html#l00049">49</a> der Datei <a class="el" href="os__thread_8h_source.html">os_thread.h</a>.</p>

<p>Wird benutzt von <a class="el" href="os__thread_8c_source.html#l00065">os_create_thread()</a> und <a class="el" href="timer-low_8c_source.html#l00052">ISR()</a>.</p>

</div>
</div>
<a class="anchor" id="a42d66a999c19e795c22714a54fc2b6b2"></a><!-- doxytag: member="os_thread.h::OS_MAX_THREADS" ref="a42d66a999c19e795c22714a54fc2b6b2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OS_MAX_THREADS&#160;&#160;&#160;4</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>maximale Anzahl an Threads im System </p>

<p>Definiert in Zeile <a class="el" href="os__thread_8h_source.html#l00048">48</a> der Datei <a class="el" href="os__thread_8h_source.html">os_thread.h</a>.</p>

<p>Wird benutzt von <a class="el" href="os__scheduler_8c_source.html#l00093">os_calc_utilization()</a>, <a class="el" href="os__scheduler_8c_source.html#l00129">os_clear_utilization()</a>, <a class="el" href="os__scheduler_8c_source.html#l00217">os_schedule()</a>, <a class="el" href="os__scheduler_8c_source.html#l00274">os_display()</a> und <a class="el" href="os__thread_8c_source.html#l00065">os_create_thread()</a>.</p>

</div>
</div>
<a class="anchor" id="a436129a005059ce528cc5a5b3bf497e9"></a><!-- doxytag: member="os_thread.h::OS_TASK_ATTR" ref="a436129a005059ce528cc5a5b3bf497e9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OS_TASK_ATTR&#160;&#160;&#160;__attribute__((OS_task))</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Attribut fuer main-Funktion eines Threads </p>

<p>Definiert in Zeile <a class="el" href="os__thread_8h_source.html#l00079">79</a> der Datei <a class="el" href="os__thread_8h_source.html">os_thread.h</a>.</p>

</div>
</div>
<hr/><h2>Dokumentation der Funktionen</h2>
<a class="anchor" id="a2225be2eb34882c09ae7ad31a8b07207"></a><!-- doxytag: member="os_thread.h::os_create_thread" ref="a2225be2eb34882c09ae7ad31a8b07207" args="(void *pStack, void(*pIp)(void))" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structTcb__t.html">Tcb_t</a>* os_create_thread </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>pStack</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(void)&#160;</td>
          <td class="paramname"><em>pIp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Legt einen neuen Thread an und setzt ihn auf runnable. Der zuerst angelegt Thread bekommt die hoechste Prioritaet, je spaeter ein Thread erzeugt wird, desto niedriger ist seine Prioritaet, das laesst sich auch nicht mehr aendern! </p>
<dl><dt><b>Parameter:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">*pStack</td><td>Zeiger auf den Stack (Ende!) des neuen Threads </td></tr>
    <tr><td class="paramname">*pIp</td><td>Zeiger auf die Main-Funktion des Threads (Instruction-Pointer) </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Rückgabe:</b></dt><dd>Zeiger auf den TCB des angelegten Threads</dd></dl>
<p>Legt einen neuen Thread an. Der zuerst angelegt Thread bekommt die hoechste Prioritaet, je spaeter ein Thread erzeugt wird, desto niedriger ist seine Prioritaet, das laesst sich auch nicht mehr aendern! </p>
<dl><dt><b>Parameter:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">*pStack</td><td>Zeiger auf den Stack (Ende!) des neuen Threads </td></tr>
    <tr><td class="paramname">*pIp</td><td>Zeiger auf die Main-Funktion des Threads (Instruction-Pointer) </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Rückgabe:</b></dt><dd>Zeiger auf den TCB des angelegten Threads </dd></dl>

<p>Definiert in Zeile <a class="el" href="os__thread_8c_source.html#l00065">65</a> der Datei <a class="el" href="os__thread_8c_source.html">os_thread.c</a>.</p>

<p>Benutzt <a class="el" href="os__thread_8h_source.html#l00118">os_enterCS</a>, <a class="el" href="behaviour__drive__chess_8c_source.html#l00175">i</a>, <a class="el" href="os__thread_8c_source.html#l00051">os_threads</a>, <a class="el" href="os__scheduler_8c_source.html#l00049">os_scheduling_allowed</a>, <a class="el" href="os__thread_8h_source.html#l00048">OS_MAX_THREADS</a>, <a class="el" href="os__thread_8h_source.html#l00083">Tcb_t::stack</a>, <a class="el" href="os__thread_8h_source.html#l00086">Tcb_t::wait_for</a>, <a class="el" href="os__thread_8c_source.html#l00054">dummy_signal</a>, <a class="el" href="os__thread_8c_source.html#l00241">os_mask_stack()</a>, <a class="el" href="os__thread_8c_source.html#l00053">os_kernel_stack</a>, <a class="el" href="os__thread_8h_source.html#l00049">OS_KERNEL_STACKSIZE</a>, <a class="el" href="os__thread_8c_source.html#l00044">os_ip_t::ip</a>, <a class="el" href="unionos__ip__t.html#acf44de7f2ffeba1fa016e064cc6c190e">os_ip_t::bytes</a>, <a class="el" href="os__thread_8c_source.html#l00046">os_ip_t::lo8</a>, <a class="el" href="os__thread_8c_source.html#l00047">os_ip_t::hi8</a>, <a class="el" href="os__thread_8c_source.html#l00108">os_exitCS()</a>, <a class="el" href="behaviour__drive__chess_8c_source.html#l00163">p</a>, <a class="el" href="os__thread_8h_source.html#l00051">OS_CONTEXT_SIZE</a>, <a class="el" href="log_8h_source.html#l00309">LOG_ERROR</a> und <a class="el" href="os__thread__pc_8c_source.html#l00043">LOG_DEBUG</a>.</p>

<p>Wird benutzt von <a class="el" href="init-low_8c_source.html#l00125">ctbot_init_low_1st()</a>, <a class="el" href="init-low_8c_source.html#l00155">ctbot_init_low_last()</a> und <a class="el" href="map_8c_source.html#l00231">map_init()</a>.</p>

<p><div class="dynheader">
Hier ist ein Graph der zeigt, was diese Funktion aufruft:</div>
<div class="dyncontent">
<div class="center"><img src="os__thread_8h_a2225be2eb34882c09ae7ad31a8b07207_cgraph.png" border="0" usemap="#os__thread_8h_a2225be2eb34882c09ae7ad31a8b07207_cgraph" alt=""/></div>
<map name="os__thread_8h_a2225be2eb34882c09ae7ad31a8b07207_cgraph" id="os__thread_8h_a2225be2eb34882c09ae7ad31a8b07207_cgraph">
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a146cd9b383b02d8e5424e2de5bfdf7e1"></a><!-- doxytag: member="os_thread.h::os_exitCS" ref="a146cd9b383b02d8e5424e2de5bfdf7e1" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void os_exitCS </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Beendet den kritischen Abschnitt wieder, der mit os_enterCS began. Falls ein Scheduler-Aufruf ansteht, wird er nun ausgefuehrt. </p>

<p>Definiert in Zeile <a class="el" href="os__thread_8c_source.html#l00108">108</a> der Datei <a class="el" href="os__thread_8c_source.html">os_thread.c</a>.</p>

<p>Benutzt <a class="el" href="os__scheduler_8c_source.html#l00049">os_scheduling_allowed</a>, <a class="el" href="os__scheduler_8c_source.html#l00217">os_schedule()</a> und <a class="el" href="timer_8h_source.html#l00088">TIMER_GET_TICKCOUNT_32</a>.</p>

<p>Wird benutzt von <a class="el" href="botfs-low_8c_source.html#l00191">botfs_acquire_lock_low()</a>, <a class="el" href="command_8c_source.html#l00263">command_write_to()</a>, <a class="el" href="command_8c_source.html#l00278">command_write()</a>, <a class="el" href="command_8c_source.html#l00301">command_write_rawdata_to()</a>, <a class="el" href="command_8c_source.html#l00332">command_write_data()</a>, <a class="el" href="display_8c_source.html#l00231">display_flash_puts()</a>, <a class="el" href="mmc_8c_source.html#l00209">mmc_read_sector_spi()</a>, <a class="el" href="mmc_8c_source.html#l00292">mmc_write_sector_spi()</a>, <a class="el" href="mmc_8c_source.html#l00458">mmc_init()</a>, <a class="el" href="os__scheduler_8c_source.html#l00093">os_calc_utilization()</a>, <a class="el" href="os__scheduler_8c_source.html#l00129">os_clear_utilization()</a> und <a class="el" href="os__thread_8c_source.html#l00065">os_create_thread()</a>.</p>

<p><div class="dynheader">
Hier ist ein Graph der zeigt, was diese Funktion aufruft:</div>
<div class="dyncontent">
<div class="center"><img src="os__thread_8h_a146cd9b383b02d8e5424e2de5bfdf7e1_cgraph.png" border="0" usemap="#os__thread_8h_a146cd9b383b02d8e5424e2de5bfdf7e1_cgraph" alt=""/></div>
<map name="os__thread_8h_a146cd9b383b02d8e5424e2de5bfdf7e1_cgraph" id="os__thread_8h_a146cd9b383b02d8e5424e2de5bfdf7e1_cgraph">
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a011a849badc985823e31fee406aa910a"></a><!-- doxytag: member="os_thread.h::os_idle" ref="a011a849badc985823e31fee406aa910a" args="(void) OS_TASK_ATTR" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void os_idle </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Idle-Thread </p>

<p>Definiert in Zeile <a class="el" href="os__scheduler_8c_source.html#l00191">191</a> der Datei <a class="el" href="os__scheduler_8c_source.html">os_scheduler.c</a>.</p>

<p>Benutzt <a class="el" href="fifo_8h_source.html#l00047">fifo_t::count</a>, <a class="el" href="fifo_8c_source.html#l00147">fifo_get_data()</a>, <a class="el" href="log_8h_source.html#l00311">LOG_RAW</a>, <a class="el" href="os__scheduler_8c_source.html#l00062">kernel_log_t::time</a>, <a class="el" href="os__scheduler_8c_source.html#l00063">kernel_log_t::from</a> und <a class="el" href="os__scheduler_8c_source.html#l00064">kernel_log_t::to</a>.</p>

<p>Wird benutzt von <a class="el" href="init-low_8c_source.html#l00155">ctbot_init_low_last()</a>.</p>

<p><div class="dynheader">
Hier ist ein Graph der zeigt, was diese Funktion aufruft:</div>
<div class="dyncontent">
<div class="center"><img src="os__thread_8h_a011a849badc985823e31fee406aa910a_cgraph.png" border="0" usemap="#os__thread_8h_a011a849badc985823e31fee406aa910a_cgraph" alt=""/></div>
<map name="os__thread_8h_a011a849badc985823e31fee406aa910a_cgraph" id="os__thread_8h_a011a849badc985823e31fee406aa910a_cgraph">
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a8dc4e2317522bc6d58ac8a66dc236745"></a><!-- doxytag: member="os_thread.h::os_kernel_log_init" ref="a8dc4e2317522bc6d58ac8a66dc236745" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void os_kernel_log_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Initialisiert das Kernel-LOG </p>

<p>Definiert in Zeile <a class="el" href="os__scheduler_8c_source.html#l00074">74</a> der Datei <a class="el" href="os__scheduler_8c_source.html">os_scheduler.c</a>.</p>

<p>Benutzt <a class="el" href="fifo_8c_source.html#l00039">fifo_init()</a>.</p>

<p>Wird benutzt von <a class="el" href="init-low_8c_source.html#l00125">ctbot_init_low_1st()</a>.</p>

<p><div class="dynheader">
Hier ist ein Graph der zeigt, was diese Funktion aufruft:</div>
<div class="dyncontent">
<div class="center"><img src="os__thread_8h_a8dc4e2317522bc6d58ac8a66dc236745_cgraph.png" border="0" usemap="#os__thread_8h_a8dc4e2317522bc6d58ac8a66dc236745_cgraph" alt=""/></div>
<map name="os__thread_8h_a8dc4e2317522bc6d58ac8a66dc236745_cgraph" id="os__thread_8h_a8dc4e2317522bc6d58ac8a66dc236745_cgraph">
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa62b6d29ae00ff288fd8969807a62b06"></a><!-- doxytag: member="os_thread.h::os_signal_set" ref="aa62b6d29ae00ff288fd8969807a62b06" args="(os_signal_t *signal)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void os_signal_set </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structos__signal__t.html">os_signal_t</a> *&#160;</td>
          <td class="paramname"><em>signal</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Blockiert den aktuellen Thread, bis ein Signal freigegeben wird </p>
<dl><dt><b>Parameter:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">*signal</td><td>Zeiger auf Signal </td></tr>
  </table>
  </dd>
</dl>

<p>Definiert in Zeile <a class="el" href="os__thread_8c_source.html#l00153">153</a> der Datei <a class="el" href="os__thread_8c_source.html">os_thread.c</a>.</p>

<p>Benutzt <a class="el" href="os__thread_8h_source.html#l00086">Tcb_t::wait_for</a>, <a class="el" href="os__scheduler_8c_source.html#l00217">os_schedule()</a>, <a class="el" href="timer_8h_source.html#l00088">TIMER_GET_TICKCOUNT_32</a>, <a class="el" href="os__thread__pc_8c_source.html#l00036">DEBUG_THREAD_N</a>, <a class="el" href="os__thread__pc_8c_source.html#l00043">LOG_DEBUG</a>, <a class="el" href="os__thread_8h_source.html#l00043">os_signal_t::mutex</a>, <a class="el" href="os__thread_8h_source.html#l00041">os_signal_t::value</a> und <a class="el" href="os__thread_8h_source.html#l00044">os_signal_t::cond</a>.</p>

<p>Wird benutzt von <a class="el" href="fifo_8c_source.html#l00147">fifo_get_data()</a> und <a class="el" href="map_8c_source.html#l00422">map_flush_cache()</a>.</p>

<p><div class="dynheader">
Hier ist ein Graph der zeigt, was diese Funktion aufruft:</div>
<div class="dyncontent">
<div class="center"><img src="os__thread_8h_aa62b6d29ae00ff288fd8969807a62b06_cgraph.png" border="0" usemap="#os__thread_8h_aa62b6d29ae00ff288fd8969807a62b06_cgraph" alt=""/></div>
<map name="os__thread_8h_aa62b6d29ae00ff288fd8969807a62b06_cgraph" id="os__thread_8h_aa62b6d29ae00ff288fd8969807a62b06_cgraph">
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="afa82438e9832609bc5ffbddad166e1b7"></a><!-- doxytag: member="os_thread.h::os_switch_thread" ref="afa82438e9832609bc5ffbddad166e1b7" args="(Tcb_t *from, Tcb_t *to)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void os_switch_thread </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structTcb__t.html">Tcb_t</a> *&#160;</td>
          <td class="paramname"><em>from</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structTcb__t.html">Tcb_t</a> *&#160;</td>
          <td class="paramname"><em>to</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Schaltet "von aussen" auf einen neuen Thread um. =&gt; kernel threadswitch Achtung, es wird erwartet, dass Interrupts an sind. Sollte eigentlich nur vom Scheduler aus aufgerufen werden! </p>
<dl><dt><b>Parameter:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">*from</td><td>Zeiger auf TCB des aktuell laufenden Threads </td></tr>
    <tr><td class="paramname">*to</td><td>Zeiger auf TCB des Threads, der nun laufen soll </td></tr>
  </table>
  </dd>
</dl>

<p>Definiert in Zeile <a class="el" href="os__thread_8c_source.html#l00166">166</a> der Datei <a class="el" href="os__thread_8c_source.html">os_thread.c</a>.</p>

<p>Benutzt <a class="el" href="os__thread_8h_source.html#l00083">Tcb_t::stack</a>.</p>

<p>Wird benutzt von <a class="el" href="os__scheduler_8c_source.html#l00217">os_schedule()</a>.</p>

</div>
</div>
<a class="anchor" id="af29e431cbca02833132a67de16011925"></a><!-- doxytag: member="os_thread.h::os_thread_yield" ref="af29e431cbca02833132a67de16011925" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void os_thread_yield </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Schaltet auf den Thread mit der naechst niedrigeren Prioritaet um, der lauffaehig ist, indem diesem der Rest der Zeitscheibe geschenkt wird.</p>
<p>Schaltet auf den Thread mit der naechst niedrigeren Prioritaet um, der lauffaehig ist, indem diesem der Rest der Zeitscheibe geschenkt wird. Auf PC ueberlassen wir diese Aufgabe dem Scheduler </p>

<p>Definiert in Zeile <a class="el" href="os__thread_8c_source.html#l00119">119</a> der Datei <a class="el" href="os__thread_8c_source.html">os_thread.c</a>.</p>

<p>Benutzt <a class="el" href="os__thread_8h_source.html#l00118">os_enterCS</a>, <a class="el" href="timer_8h_source.html#l00088">TIMER_GET_TICKCOUNT_32</a>, <a class="el" href="os__thread_8h_source.html#l00085">Tcb_t::lastSchedule</a>, <a class="el" href="timer_8h_source.html#l00040">MS_TO_TICKS</a>, <a class="el" href="os__scheduler_8h_source.html#l00034">OS_TIME_SLICE</a>, <a class="el" href="command_8c_source.html#l00071">LOG_DEBUG</a>, <a class="el" href="timer_8h_source.html#l00154">TIMER_STEPS</a>, <a class="el" href="os__thread_8h_source.html#l00088">Tcb_t::statistics</a>, <a class="el" href="os__thread_8h_source.html#l00073">os_stat_data_t::runtime</a>, <a class="el" href="os__thread_8h_source.html#l00074">os_stat_data_t::missed_deadlines</a>, <a class="el" href="os__thread_8h_source.html#l00084">Tcb_t::nextSchedule</a>, <a class="el" href="os__scheduler_8c_source.html#l00049">os_scheduling_allowed</a> und <a class="el" href="os__scheduler_8c_source.html#l00217">os_schedule()</a>.</p>

<p>Wird benutzt von <a class="el" href="botcontrol_8c_source.html#l00080">post_behaviour()</a>.</p>

<p><div class="dynheader">
Hier ist ein Graph der zeigt, was diese Funktion aufruft:</div>
<div class="dyncontent">
<div class="center"><img src="os__thread_8h_af29e431cbca02833132a67de16011925_cgraph.png" border="0" usemap="#os__thread_8h_af29e431cbca02833132a67de16011925_cgraph" alt=""/></div>
<map name="os__thread_8h_af29e431cbca02833132a67de16011925_cgraph" id="os__thread_8h_af29e431cbca02833132a67de16011925_cgraph">
</map>
</div>
</p>

</div>
</div>
<hr/><h2>Variablen-Dokumentation</h2>
<a class="anchor" id="a106f72a08737e37e3b19428051f6b8f7"></a><!-- doxytag: member="os_thread.h::dummy_signal" ref="a106f72a08737e37e3b19428051f6b8f7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structos__signal__t.html">os_signal_t</a> <a class="el" href="os__thread_8c.html#a106f72a08737e37e3b19428051f6b8f7">dummy_signal</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Signal, das referenziert wird, wenn sonst keins gesetzt ist </p>

<p>Definiert in Zeile <a class="el" href="os__thread_8c_source.html#l00054">54</a> der Datei <a class="el" href="os__thread_8c_source.html">os_thread.c</a>.</p>

<p>Wird benutzt von <a class="el" href="os__thread_8c_source.html#l00065">os_create_thread()</a>.</p>

</div>
</div>
<a class="anchor" id="a577438ea72f5dcbdff5b1cc72d231440"></a><!-- doxytag: member="os_thread.h::os_idle_stack" ref="a577438ea72f5dcbdff5b1cc72d231440" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t <a class="el" href="os__scheduler_8c.html#acb003059db99b21fa9103de9f505c216">os_idle_stack</a>[]</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Stack des Idle-Threads </p>

<p>Definiert in Zeile <a class="el" href="os__scheduler_8c_source.html#l00051">51</a> der Datei <a class="el" href="os__scheduler_8c_source.html">os_scheduler.c</a>.</p>

<p>Wird benutzt von <a class="el" href="init-low_8c_source.html#l00155">ctbot_init_low_last()</a>, <a class="el" href="os__scheduler_8c_source.html#l00274">os_display()</a> und <a class="el" href="os__thread_8c_source.html#l00265">os_print_stackusage()</a>.</p>

</div>
</div>
<a class="anchor" id="a5a17b61842aee95cf659425f3967c8be"></a><!-- doxytag: member="os_thread.h::os_kernel_stack" ref="a5a17b61842aee95cf659425f3967c8be" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t <a class="el" href="os__thread_8c.html#a684b331eb0a74daf505e2ae7e9f1bb64">os_kernel_stack</a>[]</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Kernel-Stack </p>

<p>Definiert in Zeile <a class="el" href="os__thread_8c_source.html#l00053">53</a> der Datei <a class="el" href="os__thread_8c_source.html">os_thread.c</a>.</p>

<p>Wird benutzt von <a class="el" href="os__thread_8c_source.html#l00065">os_create_thread()</a>, <a class="el" href="os__thread_8c_source.html#l00265">os_print_stackusage()</a> und <a class="el" href="timer-low_8c_source.html#l00052">ISR()</a>.</p>

</div>
</div>
<a class="anchor" id="aa7c832fad63b24918265cadcd962e5ab"></a><!-- doxytag: member="os_thread.h::os_thread_running" ref="aa7c832fad63b24918265cadcd962e5ab" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structTcb__t.html">Tcb_t</a>* <a class="el" href="os__thread__pc_8c.html#aa7c832fad63b24918265cadcd962e5ab">os_thread_running</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Zeiger auf den Thread, der zurzeit laeuft</p>
<p>Zeiger auf den TCB des Threads, der gerade laeuft</p>
<p>Zeiger auf den Thread, der gerade laeuft </p>

<p>Definiert in Zeile <a class="el" href="os__thread_8c_source.html#l00052">52</a> der Datei <a class="el" href="os__thread_8c_source.html">os_thread.c</a>.</p>

<p>Wird benutzt von <a class="el" href="botfs-low_8c_source.html#l00191">botfs_acquire_lock_low()</a> und <a class="el" href="os__scheduler_8c_source.html#l00217">os_schedule()</a>.</p>

</div>
</div>
<a class="anchor" id="a98e9aac6030735e7a03aa7b3681c43a2"></a><!-- doxytag: member="os_thread.h::os_threads" ref="a98e9aac6030735e7a03aa7b3681c43a2" args="[OS_MAX_THREADS]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structTcb__t.html">Tcb_t</a> <a class="el" href="os__thread__pc_8c.html#a98e9aac6030735e7a03aa7b3681c43a2">os_threads</a>[OS_MAX_THREADS]</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Thread-Pool (ist gleichzeitig running- und waiting-queue)</p>
<p>Array aller TCBs</p>
<p>Array aller Threads </p>

<p>Definiert in Zeile <a class="el" href="os__thread_8c_source.html#l00051">51</a> der Datei <a class="el" href="os__thread_8c_source.html">os_thread.c</a>.</p>

<p>Wird benutzt von <a class="el" href="os__scheduler_8c_source.html#l00093">os_calc_utilization()</a>, <a class="el" href="os__scheduler_8c_source.html#l00129">os_clear_utilization()</a>, <a class="el" href="os__scheduler_8c_source.html#l00217">os_schedule()</a>, <a class="el" href="os__scheduler_8c_source.html#l00274">os_display()</a> und <a class="el" href="os__thread_8c_source.html#l00065">os_create_thread()</a>.</p>

</div>
</div>
</div>


<hr class="footer"/><address class="footer"><small>
Erzeugt am Don Aug 18 2011 12:13:06 für c't-Bot von &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.5
</small></address>

</body>
</html>
